<div class="registration-main">
    <div class="header" nz-row [nzGutter]="24">
        <div class="col-md-1 display" routerLink="/riss/registration/main">Registration
            <svg class="iconPosition" width="7" height="12" viewBox="0 0 7 12" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M0.999349 1.33203L4.95891 5.29159C5.34943 5.68212 5.34943 6.31528 4.95891 6.7058L0.999348 10.6654"
                    stroke="#7731C1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </div>
        <div class="col-md-8">Detail (CR-202407301)</div>
    </div>

    <nz-steps [nzCurrent]="1">
        <nz-step nzTitle="Step 1" nzDescription="" nzDescription="Create new registration completed"></nz-step>
        <nz-step nzTitle="Step 2" nzSubtitle="" nzDescription="This request is waiting for approval"></nz-step>
        <nz-step nzTitle="Step 3" nzDescription="This request is waiting for approval"></nz-step>
    </nz-steps>

    <div class="container">
        <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-expanded="true"
                        aria-controls="panelsStayOpen-collapseOne">
                        Client information
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                    aria-labelledby="panelsStayOpen-headingOne">
                    <div class="accordion-body">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <p>Registration ID:</p>
                                    <p class="paddingFrom">CR-202407301</p>
                                </div>
                                <div class="col-md-3">
                                    <p>Name:</p>
                                    <p class="paddingFrom">วัลลภา ช่วยความดี</p>
                                </div>
                                <div class="col-md-3">
                                    <p>National ID:</p>
                                    <p class="paddingFrom">1300000747039</p>
                                </div>
                                <div class="col-md-3">
                                    <p>Age (years):</p>
                                    <p class="paddingFrom">41</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3" style="padding-top: 20px;">
                                    <p>RRisk level</p>
                                    <p class="paddingFrom">5</p>
                                </div>
                                <div class="col-md-3" style="padding-top: 20px;">
                                    <p>Risk Score Expiry Date:</p>
                                    <p class="paddingFrom">01/03/2026</p>
                                </div>
                            </div>
                            <form>
                                <fieldset disabled class="paddingtop">
                                    <div class="row">
                                        <div class="col-md-6 paddingtop">
                                            <label for="disabledTextInput" class="form-label">Registration mobile
                                                no.</label>
                                            <select id="disabledSelect" class="form-select">
                                                <option>Disabled select</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 paddingtop">
                                            <label for="disabledTextInput" class="form-label">Contact mobile no.</label>
                                            <input type="text" id="disabledTextInput" class="form-control"
                                                placeholder="Disabled input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 paddingtop">
                                            <label for="disabledTextInput" class="form-label">Email</label>
                                            <input type="text" id="disabledTextInput" class="form-control"
                                                placeholder="Disabled input">
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                            <div class="row">
                                <div class="col-md-6" style="margin-top: 10px;">
                                    <label>Client number </label>
                                    <label>*</label>
                                </div>
                                <div class="col-md-6" style="text-align: right;">
                                    <label>รายการที่เลือก 2 รายการ</label>
                                </div>
                            </div>
                            <nz-table #nzTable [nzData]="listOfDisplayData" nzTableLayout="fixed">
                                <thead>
                                    <tr>
                                        <th nzCustomFilter>
                                            Client number
                                            <nz-filter-trigger [(nzVisible)]="visible"
                                                [nzActive]="searchValue.length > 0" [nzDropdownMenu]="menu">
                                                <span nz-icon nzType="search"></span>
                                            </nz-filter-trigger>
                                        </th>
                                        <th>Account no.</th>
                                        <th>Saving / MF account name</th>
                                        <th>Joint <span nz-icon nzType="question-circle" nzTheme="outline"></span></th>
                                        <th>MF <span nz-icon nzType="question-circle" nzTheme="outline"></span></th>
                                        <th>Omnibus <span nz-icon nzType="question-circle" nzTheme="outline"></span>
                                        </th>
                                        <th>CUR</th>
                                        <th>Available balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (data of nzTable.data; track data) {
                                    <tr>
                                        <td>{{ data.clientnumber }}</td>
                                        <td>{{ data.accountno }}</td>
                                        <td>{{ data.accountname }}</td>
                                        <td>{{ data.joint }}</td>
                                        <td>{{ data.mf }}</td>
                                        <td>{{ data.omnibus }}</td>
                                        <td>{{ data.cur }}</td>
                                        <td>{{ data.availablebalance }}</td>
                                    </tr>
                                    }
                                </tbody>
                            </nz-table>
                            <nz-dropdown-menu #menu="nzDropdownMenu">
                                <div class="ant-table-filter-dropdown">
                                    <div class="search-box">
                                        <input type="text" nz-input placeholder="Search name"
                                            [(ngModel)]="searchValue" />
                                        <button nz-button nzSize="small" nzType="primary" (click)="search()"
                                            class="search-button">Search</button>
                                        <button nz-button nzSize="small" (click)="reset()">Reset</button>
                                    </div>
                                </div>
                            </nz-dropdown-menu>
                            <div class="row">
                                <div class="col-md-12">
                                    <h4>Documents for application</h4>
                                </div>
                            </div>
                            <div class="row" style="padding-top: 10px;">
                                <div class="col-md-12">
                                    <h4>แบบฟอร์มสมัครบริการ remote Investment (ลงนาม) (*) ต้องการให้ครบถ้วน</h4>
                                </div>
                            </div>
                            <div class="row" style="padding-top: 10px;">
                                <div class="col-md-6">
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"
                                            checked>
                                        <label class="form-check-label" for="flexCheckDefault">
                                            แบบฟอร์มสมัครบริการ remote Investment (ลงนาม)*
                                        </label>
                                    </div>
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                            checked>
                                        <label class="form-check-label" for="flexCheckChecked">
                                            สำเนาสมุดเงินฝาก/รายการเดินบัญชี*
                                        </label>
                                    </div>
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                                        <label class="form-check-label" for="flexCheckChecked">
                                            แบบฟอร์มสิทธิพื้นฐานผู้บริโภค
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                        <label class="form-check-label" for="flexCheckDefault">
                                            สำเนาบัตรประชาชน / หนังสือเดินทาง*
                                        </label>
                                    </div>
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                                        <label class="form-check-label" for="flexCheckChecked">
                                            แบบฟอร์มประเมินความเสี่ยง
                                        </label>
                                    </div>
                                    <div class="form-check" style="padding-top: 10px;">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                                        <label class="form-check-label" for="flexCheckChecked">
                                            แบบฟอร์มสำหรับการมอบอำนาจ
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="accordion" id="accordionPanelsStayOpenExampleTwo" style="margin-top: 20px;">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseTwo">
                            RM information
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show"
                        aria-labelledby="panelsStayOpen-headingTwo">
                        <div class="accordion-body">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-3">
                                        <p>Team:</p>
                                        <p class="paddingFrom">T12</p>
                                    </div>
                                    <div class="col-md-3">
                                        <p>ID:</p>
                                        <p class="paddingFrom">S30394</p>
                                    </div>
                                    <div class="col-md-3">
                                        <p>Name:</p>
                                        <p class="paddingFrom">เรวดี ศิริรัตน์</p>
                                    </div>
                                    <div class="col-md-3">
                                        <p>Contact no.:</p>
                                        <p class="paddingFrom">0848748534</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3" style="padding-top: 20px;">
                                        <p>WO Maker ID: </p>
                                        <p class="paddingFrom">12345</p>
                                    </div>
                                    <div class="col-md-3" style="padding-top: 20px;">
                                        <p>WO Maker:</p>
                                        <p class="paddingFrom">WO Maker</p>
                                    </div>
                                    <div class="col-md-6" style="padding-top: 20px;">
                                        <p>Contact no.:</p>
                                        <p class="paddingFrom">0848748534</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div class="accordion" id="accordionPanelsStayOpenExampleThree" style="margin-top: 20px;">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseThree">
                            Log
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show"
                        aria-labelledby="panelsStayOpen-headingThree">
                        <div class="accordion-body">
                            <div class="card-body">
                                <nz-table #nestedTable [nzData]="listOfParentData" [nzPageSize]="10">
                                    <thead>
                                      <tr>
                                        <th>Last Update</th>
                                        <th>Case ID</th>
                                        <th>createDate</th>
                                        <th>rmName</th>
                                        <th>approver1</th>
                                        <th>approver2</th>
                                        <th colspan="2" style="text-align: start;">status</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      @for (data of nestedTable.data; track data) {
                                        <tr>
                                          <td>{{ data.updateDate }}</td>
                                          <td>{{ data.caseID }}</td>
                                          <td>{{ data.createDate }}</td>
                                          <td>{{ data.rmName }}</td>
                                          <td>{{ data.approver1 }}</td>
                                          <td>{{ data.approver2 }}</td>
                                          <td>{{ data.status }}</td>
                                          <td><button (click)="toggleExpand(data)">{{ data.expand ? 'Collapse' : 'Expand' }}</button></td>
                                        </tr>
                                        <tr *ngIf="data.expand">
                                          <nz-table #innerTable [nzData]="listOfChildrenData" nzSize="middle" [nzShowPagination]="false">
                                            <tbody>
                                              @for (data of innerTable.data; track data) {
                                                <tr style="background-color: #fbfbfb;">
                                                  <td><p style="margin-left: 16px;">{{ data.updateDate }}</p></td>
                                                  <td><p>{{ data.dis }}</p> <p>{{ data.dis2 }}</p></td>

                                                  <td>
                                                    <span class="table-operation">

                                                    </span>
                                                  </td>
                                                </tr>
                                              }
                                            </tbody>
                                          </nz-table>
                                        </tr>
                                      }
                                    </tbody>
                                  </nz-table>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <div class="accordion" id="accordionPanelsStayOpenExampleThree" style="margin-top: 20px;">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseThree">
                            Log
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show"
                        aria-labelledby="panelsStayOpen-headingThree">
                        <div class="accordion-body">
                            <div class="card-body">
                                <nz-table #nestedTable [nzData]="listOfParentData" [nzPageSize]="10">
                                    <thead>
                                        <tr>
                                            <th  colspan="1">Last Update</th>
                                            <th>Case ID</th>
                                            <th>createDate</th>
                                            <th>rmName</th>
                                            <th>approver1</th>
                                            <th>approver2</th>
                                            <th colspan="2" style="text-align: start;">status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @for (data of nestedTable.data; track data) {
                                        <tr>
                                            <td>{{ data.updateDate }}</td>
                                            <td>{{ data.caseID }}</td>
                                            <td>{{ data.createDate }}</td>
                                            <td>{{ data.rmName }}</td>
                                            <td>{{ data.approver1 }}</td>
                                            <td>{{ data.approver2 }}</td>
                                            <td>{{ data.status }}</td>
                                            <td><button (click)="toggleExpand(data)">
                                                <i [ngClass]="data.expand ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
                                            </button></td>
                                        </tr>
                                        <tr *ngIf="data.expand">
                                            <td colspan="8" style="padding: 0;">
                                                <div class="inner-table-wrapper">
                                                    <nz-table #innerTable [nzData]="listOfChildrenData" nzSize="middle" [nzShowPagination]="false">
                                                        <tbody>
                                                            @for (data of innerTable.data; track data) {
                                                                <tr style="background-color: #fbfbfb;">
                                                                    <td style="width: 188px;"><p style="margin-left: 10px;">{{ data.updateDate }}</p></td>
                                                                    <td><p>{{ data.dis }}</p> <p>{{ data.dis2 }}</p></td>
                                                                    <td>
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </nz-table>
                                                </div>
                                            </td>
                                        </tr>
                                        }
                                    </tbody>
                                </nz-table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            